

<!DOCTYPE html>
<html class="writer-html5" lang="ru" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Веб ультразвуковая страница &mdash; документация Alash Raspberry Pi 5 Kit </title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=d39ee99e" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=555aecba"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/translations.js?v=5b699b7f"></script>
      <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="../../../genindex.html" />
    <link rel="search" title="Поиск" href="../../../search.html" />
    <link rel="next" title="Веб сайт для управления сервоприводом" href="../lesson8/webservo.html" />
    <link rel="prev" title="Мини веб метостанция" href="../lesson6/webdht.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Alash Raspberry Pi 5 Kit
              <img src="../../../_static/logo.png" class="logo" alt="Логотип"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" aria-label="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Меню навигации">
              <p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/about.html">Что такое Raspberry Pi?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about/about.html#why-was-raspberry-pi-created">Зачем был создан Raspberry Pi?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../specifications/specifications.html">Технические харектеристика</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#raspberry-pi-5">Краткое введение в Raspberry Pi 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#id2">Характеристики Raspberry Pi 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#id3">Что нового в Raspberry Pi 5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../specifications/specifications.html#id4">Обзор процессора</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../specifications/specifications.html#id5">Сравнительная таблица</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#benchmarks">Производительность в тестах (Benchmarks)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#id6">Идеальные сценарии применения</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#id7">Заключение</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../parts/index.html">Комплектация набора</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../parts/index.html#id2">Сводный список компонентов</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../parts/photos.html">Фотографий компонентов</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../start/index.html">Первый запуск</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../start/firstactions/firstactions.html">Подготовка Raspberry Pi 5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id1">Вытаскиваем кулер</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id2">Переворачиваем</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id3">Убираем плёнку с термопрокладки</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#raspberry">Ставим на Raspberry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id4">Зажимаем до характерного щелчка в указанных местах</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id5">С обратной стороны убеждаемся, что всё защёлкнуто</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id6">Вставляем штекер кулера</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id7">Штекер должен быть защёлкнут до конца</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id8">Берем основу</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id9">Снимаем скотч и вставляем в пазы</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id10">Вставляем Raspberry на своё место</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#m2-5">Прикручиваем винтами M2.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id11">В итоге должно получиться как на фото</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#hdmi-microhdmi-raspberry">Вставляем HDMI-MicroHDMI кабель в Raspberry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id12">Вставляем кабель питания в разъём</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id13">Подключаем клавиатуру с тачпадом</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#usb">Вставляем USB свисток</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id14">Дальнейшая настройка</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../start/firstboot/firstboot.html">Первое включение Raspberry Pi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstboot/firstboot.html#id1">Почему важно подключить монитор</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstboot/firstboot.html#wi-fi">Подключаемся к Wi-Fi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstboot/firstboot.html#id2">Зачем это нужно</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../start/firstcode/index.html">Запуск первого кода на Raspberry Pi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstcode/hdmi.html">Способ работы через монитор HDMI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstcode/vnc.html">VNC-подключение</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstcode/ssh.html">SSH-подключение VS Code для удаленной разработки на Raspberry Pi</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Уроки на основе CircuitPython</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../module1/index.html">Модуль первый</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson1/blink.html">Урок 1: Моргание светодиодом ✨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson2/button.html">Урок 2: Подключение кнопки ✨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson3/rgb.html">Урок 3: RGB светодиод 🌈</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson4/active_buzzer.html">Урок 4: Работа с активным зуммером 🔊</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson5/passive_buzzer.html">Урок 5: Работа с пассивным зуммером 🎵</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson6/dht.html">Урок 6: Работа с датчиком температуры и влажности DHT11</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson7/hsr04.html">Урок 7: Ультразвуковой датчик HC-SR04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson8/servo.html">Урок 8: Управление сервоприводом SG90 🔄</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson9/relay.html">Урок 9: Управление реле 🔌</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson10/klav.html">Урок 10: Матричная клавиатура ⌨️</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson11/encoder.html">Урок 11: Работа с энкодером 🔄</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson12/max.html">Урок 12: LED-матрица MAX7219 🔲</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson13/pot.html">Урок 13: Модуль потенциометра ADS1115 🎚️</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson14/joystick.html">Урок 14: Работа с джойстиком 🕹️</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson15/mpu6050.html">Урок 15: Работа с MPU6050 🧭</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson16/pca9685.html">Урок 16: Модуль PCA9685 для сервоприводов  🤖</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson17/lcd1602.html">Урок 17: LCD1602 дисплей</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson18/mfrc522.html">Урок 18: NFC модуль MFRC522</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson19/camera.html">Урок 19: Работа с камерой Raspberry Pi 📷</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Модуль второй</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../lesson1/flask.html">Основы Flask</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson2/weblink.html">Веб светодиод</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson3/webrgb.html">RGB веб светодиод</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson4/webbuzzer.html">Активный зуммер в веб интерфейсе</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson5/webpassivebuzzer.html">Пассивный зуммер в веб интерфейсе</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson6/webdht.html">Мини веб метостанция</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Веб ультразвуковая страница</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson8/webservo.html">Веб сайт для управления сервоприводом</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson9/webrelay.html">Веб реле</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson10/webkeypad.html">Веб клавиатура</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson11/webencoder.html">Энкодер с веб-интерфейсом</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson12/webmax.html">MAX7219 и веб-интерфейс</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson13/webpot.html">Потенциометр и веб-интерфейс</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson14/webjoystick.html">Веб-интерфейс и джойстик</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson15/webmpu.html">3D веб визуализация MPU6050</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson16/webpca.html">Веб управлениt сервоприводами через PCA9685</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson17/weblcd.html">Урок: Веб-интерфейс для управления LCD дисплеем</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson18/nfrc522.html">Урок: Веб-интерфейс для RFID считывателя на Raspberry Pi</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../lessons/index.html">Уроки</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../lessons/module1/index.html">Модуль 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson1/led.html">Урок 1: Моргание светодиодом ✨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson2/ledbutton.html">Урок 2: Подключение кнопки ✨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson3/rgb.html">Урок 3: RGB светодиод</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson4/activebuzzer.html">Урок 4: Работа с активным зуммером 🔊</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson5/passivebuzzer.html">Урок 5: Пассивный зуммер и потенциометр</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson6/relay.html">Урок 6: Управление реле</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson7/dht11.html">Урок 7: Датчик DHT11 (Кастомная реализация)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson8/sg90.html">Урок 8: Управление сервоприводом SG90</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson10/lcd1602.html">Урок 10: Работа с LCD1602</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson11/mfrc522.html">Урок 11: СКУД на базе RFID и сервопривода</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson12/8dotdisplay.html">Урок 12: LED-матрица MAX7219</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson13/joystick.html">Урок 13: Джойстик</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson14/encoder.html">Урок 14: Работа с энкодером и кнопкой</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson15/klav.html">Урок 15 Клавиатура</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson16/pot.html">Урок 16: Работа с потенциометром ⚙️</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson17/camera.html">Урок 17: Камера</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson18/hsr04.html">Урок 7: Ультразвуковой радар 📡</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../lessons/module2/index.html">Модуль 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson1/flask.html">Урок 1: Первый веб-сайт на Flask</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson2/webserver.html">Урок: Управление светодиодом через веб-интерфейс</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson3/ledbutton.html">Урок 3: Управление светодиодом через Flask</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson4/flaskdht.html">Урок 4: Мониторинг DHT11 через Flask</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson5/webcamera.html">Урок 18: Онлайн-видеопоток с PiCamera2 через Flask</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../lessons/module3/index.html">Модуль 3</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../components/index.html">Узнайте больше о компонентах, входящих в Ваш комплект</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../components/basic/breadboard.html">Breadboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../components/basic/jumper.html">Светодиоды</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../components/basic/resistor.html">Резистор</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../appendix/index.html">Дополнения</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/i2c/i2c.html">Настройка I2C</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/i2c/i2c.html#id1">Подготовка системы</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/i2c/i2c.html#i2c-raspi-config">Включение I2C через raspi-config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/i2c/i2c.html#id2">Проверка работы I2C</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/i2c/i2c.html#id3">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/spi/spi.html">Настройка SPI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/spi/spi.html#id1">Подготовка системы</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/spi/spi.html#spi-raspi-config">Включение SPI через raspi-config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/spi/spi.html#id2">Проверка работы SPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/spi/spi.html#id3">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/ping/ping.html">Проверка подключения к локальной сети</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/vnc/vnc.html">Настройка VNC (Удаленный рабочий стол)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vnc/vnc.html#id1">Шаг 1: Установка VNC-сервера</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vnc/vnc.html#id2">Шаг 2: Подключение к VNC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/ssh/ssh.html">Настройка SSH (PuTTY)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/ssh.html#ssh">Шаг 1: Включение SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/ssh.html#raspberry-pi-ssh">Шаг 2: Подключение к Raspberry Pi через SSH</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/ssh/cmd.html">Установка встроенного SSH-клиента в Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#ssh">Что такое SSH и почему важен встроенный клиент</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id1">Проверка наличия SSH-клиента</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id2">Включение SSH-клиента в Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id3">Проверка работоспособности</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#raspberry-pi">Подключение к Raspberry Pi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#ssh-raspberry-pi">Основные команды SSH для работы с Raspberry Pi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id4">Возможные проблемы и их решения</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id5">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/vscode/vscode.html">Установка Visual Studio Code на Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#visual-studio-code">Что такое Visual Studio Code?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#vs-code-windows">Установка VS Code на Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#vs-code">Первый запуск VS Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#id1">Установка необходимых расширений</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#id2">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/getip/getip.html">Как узнать IP адрес Raspberry Pi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/getip/getip.html#ip">Способ 1. Определение IP адреса через командную строку</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/getip/getip.html#id1">Способ 2. Определение IP адреса через графический интерфейс</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/getip/getip.html#id2">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/gpiozero/gpiozero.html"><strong>Если</strong> <code class="docutils literal notranslate"><span class="pre">gpiozero</span></code> <strong>не работает.</strong></a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../thankyou/thankyou.html">Обратная связь</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Меню навигации для мобильных устройств" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Alash Raspberry Pi 5 Kit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Навигация по страницам">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Уроки на основе CircuitPython</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Модуль второй</a></li>
      <li class="breadcrumb-item active">Веб ультразвуковая страница</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Навигация по соседним страницам">
        <a href="../lesson6/webdht.html" class="btn btn-neutral float-left" title="Мини веб метостанция" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="../lesson8/webservo.html" class="btn btn-neutral float-right" title="Веб сайт для управления сервоприводом" accesskey="n">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>Веб ультразвуковая страница<a class="headerlink" href="#id1" title="Ссылка на этот заголовок"></a></h1>
<section id="id2">
<h2>Теоретическая часть<a class="headerlink" href="#id2" title="Ссылка на этот заголовок"></a></h2>
<p>Ультразвуковой датчик <strong>HC-SR04</strong> — это популярный сенсор для измерения расстояния без физического контакта. Принцип его работы основан на эхолокации: датчик отправляет ультразвуковой импульс и измеряет время, которое требуется звуковой волне, чтобы отразиться от объекта и вернуться обратно. Зная скорость звука в воздухе, можно вычислить расстояние до объекта.</p>
<p>В этом уроке мы создадим веб-приложение для мониторинга расстояния в реальном времени. Показания будут отображаться на элегантной веб-странице с графическим индикатором, доступной с любого устройства в локальной сети.</p>
<p>Ключевые технологии и концепции, которые мы будем использовать:
- <strong>HC-SR04</strong> для измерения расстояния
- <strong>CircuitPython</strong> для взаимодействия с аппаратной частью Raspberry Pi
- <strong>Flask</strong> для создания веб-сервера
- <strong>Многопоточность</strong> для параллельного считывания данных
- <strong>Адаптивный веб-дизайн</strong> с прогресс-баром для визуализации расстояния</p>
</section>
<section id="id3">
<h2>Необходимые компоненты<a class="headerlink" href="#id3" title="Ссылка на этот заголовок"></a></h2>
<ul class="simple">
<li><p>Raspberry Pi (любая модель с GPIO)</p></li>
<li><p>Ультразвуковой датчик HC-SR04</p></li>
<li><p>Соединительные провода</p></li>
<li><p>Макетная плата (breadboard)</p></li>
<li><p>Резисторы для создания делителя напряжения (если нужен; см. примечание)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>HC-SR04 работает от 5V, но пин Echo выдает сигнал 5V, что может повредить Raspberry Pi (GPIO рассчитаны на 3.3V). Для безопасного использования можно добавить делитель напряжения для пина Echo или использовать встроенную защиту CircuitPython.</p>
</div>
</section>
<section id="id4">
<h2>Схема подключения<a class="headerlink" href="#id4" title="Ссылка на этот заголовок"></a></h2>
<figure class="align-center" id="id16">
<a class="reference internal image-reference" href="../../../_images/hcsr04_circuit.png"><img alt="../../../_images/hcsr04_circuit.png" src="../../../_images/hcsr04_circuit.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-text"><strong>Рис. 1:</strong> Схема подключения HC-SR04 к Raspberry Pi</span><a class="headerlink" href="#id16" title="Ссылка на это изображение"></a></p>
</figcaption>
</figure>
<p>Подключите HC-SR04 к Raspberry Pi следующим образом:
- VCC датчика к 5V на Raspberry Pi
- GND датчика к GND (земля) на Raspberry Pi
- Trig (Trigger) датчика к GPIO23
- Echo датчика к GPIO24 (через делитель напряжения, если используется)</p>
</section>
<section id="id5">
<h2>Установка необходимых библиотек<a class="headerlink" href="#id5" title="Ссылка на этот заголовок"></a></h2>
<p>Перед запуском кода установите необходимые библиотеки:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>flask<span class="w"> </span>adafruit-circuitpython-hcsr04
</pre></div>
</div>
</section>
<section id="id6">
<h2>Структура проекта<a class="headerlink" href="#id6" title="Ссылка на этот заголовок"></a></h2>
<p>Создайте следующую структуру папок и файлов:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>hcsr04_web_monitor/
├──<span class="w"> </span>app.py<span class="w">              </span><span class="c1"># Основной файл Flask-приложения</span>
└──<span class="w"> </span>templates/
<span class="w">    </span>└──<span class="w"> </span>index.html<span class="w">      </span><span class="c1"># HTML-шаблон для веб-интерфейса</span>
</pre></div>
</div>
</section>
<section id="id7">
<h2>Код приложения<a class="headerlink" href="#id7" title="Ссылка на этот заголовок"></a></h2>
<p>Файл: <cite>hcsr04_web_monitor/app.py</cite></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">board</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">adafruit_hcsr04</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>

<span class="c1"># Инициализация Flask приложения</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Настраиваем пины для ультразвукового датчика</span>
<span class="n">sonar</span> <span class="o">=</span> <span class="n">adafruit_hcsr04</span><span class="o">.</span><span class="n">HCSR04</span><span class="p">(</span><span class="n">trigger_pin</span><span class="o">=</span><span class="n">board</span><span class="o">.</span><span class="n">D23</span><span class="p">,</span> <span class="n">echo_pin</span><span class="o">=</span><span class="n">board</span><span class="o">.</span><span class="n">D24</span><span class="p">)</span>

<span class="c1"># Глобальные переменные для хранения данных</span>
<span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Ожидание данных...&quot;</span>
<span class="n">last_update</span> <span class="o">=</span> <span class="s2">&quot;Никогда&quot;</span>

<span class="c1"># Функция для обновления данных с датчика</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_sensor_data</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">distance</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">last_update</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Получаем расстояние в сантиметрах</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="n">sonar</span><span class="o">.</span><span class="n">distance</span>

        <span class="c1"># Округляем до одного десятичного знака</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Обновляем статус и время</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Данные получены успешно&quot;</span>
        <span class="n">last_update</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y %H:%M:%S&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Обработка ошибок чтения</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Ошибка чтения данных, проверьте подключение&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Критическая ошибка: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># Маршруты Flask</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">():</span>
    <span class="c1"># Обновляем данные с датчика</span>
    <span class="n">update_sensor_data</span><span class="p">()</span>

    <span class="c1"># Вычисляем процент для прогресс-бара (0-350 см)</span>
    <span class="n">max_distance</span> <span class="o">=</span> <span class="mi">350</span>  <span class="c1"># Максимальная дальность HC-SR04 около 350-400 см</span>

    <span class="c1"># Ограничиваем значение в пределах 0-100%</span>
    <span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="n">max_distance</span><span class="p">:</span>
        <span class="n">percentage</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">percentage</span> <span class="o">=</span> <span class="p">(</span><span class="n">distance</span> <span class="o">/</span> <span class="n">max_distance</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="c1"># Рендерим шаблон с текущими данными</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span>
        <span class="s1">&#39;index.html&#39;</span><span class="p">,</span>
        <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span>
        <span class="n">percentage</span><span class="o">=</span><span class="n">percentage</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">last_update</span><span class="o">=</span><span class="n">last_update</span>
    <span class="p">)</span>

<span class="c1"># Функция для запуска фонового обновления данных</span>
<span class="k">def</span><span class="w"> </span><span class="nf">background_update</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">update_sensor_data</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Обновляем каждые 0.5 секунд</span>

<span class="c1"># Функция очистки при завершении</span>
<span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Программа остановлена&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># Регистрируем функцию очистки</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">atexit</span>
    <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">cleanup</span><span class="p">)</span>

    <span class="c1"># Запускаем фоновое обновление данных в отдельном потоке</span>
    <span class="n">sensor_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">background_update</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">sensor_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Запускаем веб-сервер</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Веб-сервер запущен на порту 8080. Нажмите Ctrl+C для завершения.&quot;</span><span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="html">
<h2>HTML-шаблон<a class="headerlink" href="#html" title="Ссылка на этот заголовок"></a></h2>
<p>Файл: <cite>hcsr04_web_monitor/templates/index.html</cite></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Ультразвуковой датчик HC-SR04<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;refresh&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">        </span><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="n">Arial</span><span class="p">,</span><span class="w"> </span><span class="kc">sans-serif</span><span class="p">;</span>
<span class="w">            </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f5f5f5</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nt">h1</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#333</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">container</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">800</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">            </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">distance-display</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">relative</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">distance-value</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">em</span><span class="p">;</span>
<span class="w">            </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="kc">bold</span><span class="p">;</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#2196F3</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">distance-unit</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">em</span><span class="p">;</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#666</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">progress-bar</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#e0e0e0</span><span class="p">;</span>
<span class="w">            </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="k">overflow</span><span class="p">:</span><span class="w"> </span><span class="kc">hidden</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">progress-fill</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">            </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="nb">linear-gradient</span><span class="p">(</span><span class="mi">90</span><span class="kt">deg</span><span class="p">,</span><span class="w"> </span><span class="mh">#2196F3</span><span class="p">,</span><span class="w"> </span><span class="mh">#03A9F4</span><span class="p">);</span>
<span class="w">            </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">transition</span><span class="p">:</span><span class="w"> </span><span class="k">width</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">s</span><span class="w"> </span><span class="kc">ease-in-out</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">min-max</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="w">            </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">space-between</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#666</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">status</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f0f0f0</span><span class="p">;</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#333</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">last-update</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#888</span><span class="p">;</span>
<span class="w">            </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="kt">em</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">info</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#666</span><span class="p">;</span>
<span class="w">            </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="kt">em</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Ультразвуковой датчик HC-SR04<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;distance-display&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;distance-value&quot;</span><span class="p">&gt;</span>
                {{ distance }} <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;distance-unit&quot;</span><span class="p">&gt;</span>см<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;progress-bar&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;progress-fill&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: {{ percentage }}%&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;min-max&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>0 см<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>350 см<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Статус: {{ status }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;last-update&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Последнее обновление: {{ last_update }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;info&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Страница обновляется автоматически каждые 2 секунды<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Максимальная дальность датчика HC-SR04: около 350 см<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="id8">
<h2>Разбор кода<a class="headerlink" href="#id8" title="Ссылка на этот заголовок"></a></h2>
<p><strong>Python-код (app.py):</strong></p>
<ol class="arabic">
<li><p><strong>Импорт библиотек</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">board</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">adafruit_hcsr04</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>
</pre></div>
</div>
<ul class="simple">
<li><p><cite>adafruit_hcsr04</cite> для работы с ультразвуковым датчиком</p></li>
<li><p><cite>board</cite> для доступа к пинам Raspberry Pi</p></li>
<li><p><cite>flask</cite> для создания веб-приложения</p></li>
<li><p><cite>threading</cite> для многопоточности</p></li>
<li><p><cite>datetime</cite> для отслеживания времени обновления данных</p></li>
</ul>
</li>
<li><p><strong>Инициализация Flask и датчика</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">sonar</span> <span class="o">=</span> <span class="n">adafruit_hcsr04</span><span class="o">.</span><span class="n">HCSR04</span><span class="p">(</span><span class="n">trigger_pin</span><span class="o">=</span><span class="n">board</span><span class="o">.</span><span class="n">D23</span><span class="p">,</span> <span class="n">echo_pin</span><span class="o">=</span><span class="n">board</span><span class="o">.</span><span class="n">D24</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Создаем экземпляр Flask-приложения</p></li>
<li><p>Инициализируем датчик HC-SR04 с указанием пинов для триггера и эхо</p></li>
</ul>
</li>
<li><p><strong>Глобальные переменные для хранения данных</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Ожидание данных...&quot;</span>
<span class="n">last_update</span> <span class="o">=</span> <span class="s2">&quot;Никогда&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Переменные для хранения измеренного расстояния, статуса и времени последнего обновления</p></li>
<li><p>Используются глобальные переменные для доступа из разных функций и потоков</p></li>
</ul>
</li>
<li><p><strong>Функция обновления данных</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">update_sensor_data</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">distance</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">last_update</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="n">sonar</span><span class="o">.</span><span class="n">distance</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Данные получены успешно&quot;</span>
        <span class="n">last_update</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">.%m.%Y %H:%M:%S&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Ошибка чтения данных, проверьте подключение&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Критическая ошибка: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Получает расстояние от датчика и обновляет глобальные переменные</p></li>
<li><p>Округляет результат до одного десятичного знака для лучшей читаемости</p></li>
<li><p>Обрабатывает два типа ошибок:
- <cite>RuntimeError</cite> - временные ошибки чтения (например, эхо не вернулось вовремя)
- Другие исключения - более серьезные проблемы</p></li>
</ul>
</li>
<li><p><strong>Веб-маршрут основной страницы</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">():</span>
    <span class="n">update_sensor_data</span><span class="p">()</span>

    <span class="n">max_distance</span> <span class="o">=</span> <span class="mi">350</span>
    <span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="n">max_distance</span><span class="p">:</span>
        <span class="n">percentage</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">percentage</span> <span class="o">=</span> <span class="p">(</span><span class="n">distance</span> <span class="o">/</span> <span class="n">max_distance</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span>
        <span class="s1">&#39;index.html&#39;</span><span class="p">,</span>
        <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span>
        <span class="n">percentage</span><span class="o">=</span><span class="n">percentage</span><span class="p">,</span>
        <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">last_update</span><span class="o">=</span><span class="n">last_update</span>
    <span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Определяет маршрут для главной страницы</p></li>
<li><p>Обновляет данные при каждом обращении к странице</p></li>
<li><p>Вычисляет процентное значение для прогресс-бара (0-100%)</p></li>
<li><p>Рендерит HTML-шаблон с передачей всех необходимых данных</p></li>
</ul>
</li>
<li><p><strong>Функция фонового обновления</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">background_update</span><span class="p">():</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">update_sensor_data</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Бесконечный цикл для регулярного обновления данных</p></li>
<li><p>Обновление происходит каждые 0.5 секунды</p></li>
</ul>
</li>
<li><p><strong>Запуск приложения</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">atexit</span>
    <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">cleanup</span><span class="p">)</span>

    <span class="n">sensor_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">background_update</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">sensor_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Регистрируем функцию очистки через <cite>atexit</cite></p></li>
<li><p>Запускаем фоновое обновление данных в отдельном потоке</p></li>
<li><p>Помечаем поток как демон (<cite>daemon=True</cite>), чтобы он автоматически завершался вместе с основным потоком</p></li>
<li><p>Запускаем Flask-сервер на порту 8080, доступный для всех интерфейсов (<cite>0.0.0.0</cite>)</p></li>
<li><p>Обрабатываем сигнал завершения (Ctrl+C)</p></li>
</ul>
</li>
</ol>
<p><strong>HTML-шаблон (index.html):</strong></p>
<ol class="arabic">
<li><p><strong>Структура и метаданные</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Ультразвуковой датчик HC-SR04<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;refresh&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;2&quot;</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- CSS стили ... --&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Стандартная структура HTML-документа</p></li>
<li><p>Метатег viewport для адаптивности на мобильных устройствах</p></li>
<li><p><cite>&lt;meta http-equiv=»refresh» content=»2»&gt;</cite> - автоматическое обновление страницы каждые 2 секунды</p></li>
</ul>
</li>
<li><p><strong>CSS-стили</strong></p>
<p>CSS-стили определяют современный и функциональный интерфейс:
- Контейнер с тенью и закругленными углами
- Большое отображение значения расстояния с яркой цветовой схемой
- Прогресс-бар с градиентной заливкой и плавной анимацией
- Адаптивная вёрстка для разных устройств</p>
</li>
<li><p><strong>Основной контент</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Ультразвуковой датчик HC-SR04<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;distance-display&quot;</span><span class="p">&gt;</span>
        <span class="cm">&lt;!-- Отображение расстояния и прогресс-бар --&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Статус: {{ status }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;last-update&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Последнее обновление: {{ last_update }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;info&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Страница обновляется автоматически каждые 2 секунды<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Максимальная дальность датчика HC-SR04: около 350 см<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Структурированный контейнер с различными информационными блоками</p></li>
<li><p>Блок статуса для отображения текущего состояния датчика</p></li>
<li><p>Информация о времени последнего обновления</p></li>
<li><p>Дополнительная информация о работе приложения</p></li>
</ul>
</li>
<li><p><strong>Отображение расстояния и прогресс-бар</strong></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;distance-display&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;distance-value&quot;</span><span class="p">&gt;</span>
        {{ distance }} <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;distance-unit&quot;</span><span class="p">&gt;</span>см<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;progress-bar&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;progress-fill&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: {{ percentage }}%&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;min-max&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>0 см<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>350 см<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Крупное отображение текущего расстояния с единицей измерения</p></li>
<li><p>Прогресс-бар, визуально отображающий измеренное расстояние</p></li>
<li><p>Подписи минимального и максимального значений</p></li>
<li><p>Динамическое изменение ширины заполнения прогресс-бара через шаблонную переменную</p></li>
</ul>
</li>
</ol>
</section>
<section id="id9">
<h2>Особенности реализации<a class="headerlink" href="#id9" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic">
<li><p><strong>Визуализация данных с помощью прогресс-бара</strong></p>
<p>Прогресс-бар с градиентной заливкой даёт наглядное представление об измеренном расстоянии. Использование переменной <cite>percentage</cite> позволяет динамически изменять ширину заполнения.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;progress-fill&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: {{ percentage }}%&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
</li>
<li><p><strong>Многопоточное считывание данных</strong></p>
<p>Использование отдельного потока для считывания данных с датчика позволяет:
- Избежать блокировки веб-сервера во время измерений
- Обеспечить постоянное обновление данных в фоновом режиме
- Иметь актуальные данные к моменту запроса страницы пользователем</p>
</li>
<li><p><strong>Обработка ошибок датчика</strong></p>
<p>Ультразвуковые датчики могут периодически выдавать ошибки из-за помех, неправильных отражений или других факторов. Код включает обработку этих ошибок:
- Отлавливаются исключения <cite>RuntimeError</cite>, которые обычно связаны с временными проблемами чтения
- Более серьезные ошибки также обрабатываются, и пользователю показывается соответствующий статус</p>
</li>
<li><p><strong>Автоматическое обновление страницы</strong></p>
<p>Метатег <cite>&lt;meta http-equiv=»refresh» content=»2»&gt;</cite> обеспечивает автоматическое обновление страницы каждые 2 секунды. Это простой, но эффективный способ получать актуальные данные без использования JavaScript.</p>
</li>
<li><p><strong>Плавные переходы в CSS</strong></p>
<p>Свойство <cite>transition: width 0.5s ease-in-out</cite> в CSS для <cite>.progress-fill</cite> обеспечивает плавное изменение прогресс-бара при обновлении данных, что делает интерфейс более приятным для пользователя.</p>
</li>
</ol>
</section>
<section id="id10">
<h2>Запуск приложения<a class="headerlink" href="#id10" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic">
<li><p>Сохраните файлы с указанной структурой.</p></li>
<li><p>Запустите приложение:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>app.py
</pre></div>
</div>
</li>
<li><p>Откройте веб-браузер и перейдите по адресу <cite>http://&lt;IP-адрес-Raspberry-Pi&gt;:8080</cite></p>
<p>Например: <cite>http://192.168.1.100:8080</cite></p>
</li>
</ol>
</section>
<section id="id11">
<h2>Ожидаемый результат<a class="headerlink" href="#id11" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic simple">
<li><p>В браузере загрузится страница с крупным отображением текущего расстояния до объекта в сантиметрах.</p></li>
<li><p>Под значением будет отображаться прогресс-бар, графически показывающий измеренное расстояние относительно максимального диапазона датчика (350 см).</p></li>
<li><p>Внизу страницы будет показан текущий статус датчика и время последнего обновления данных.</p></li>
<li><p>Страница будет автоматически обновляться каждые 2 секунды, показывая актуальные данные.</p></li>
<li><p>При перемещении объекта ближе или дальше от датчика значения и прогресс-бар будут соответственно изменяться.</p></li>
</ol>
<figure class="align-center" id="id17">
<a class="reference internal image-reference" href="../../../_images/hcsr04_web_interface.png"><img alt="../../../_images/hcsr04_web_interface.png" src="../../../_images/hcsr04_web_interface.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-text"><strong>Рис. 2:</strong> Пример веб-интерфейса для мониторинга расстояния</span><a class="headerlink" href="#id17" title="Ссылка на это изображение"></a></p>
</figcaption>
</figure>
</section>
<section id="id12">
<h2>Завершение работы<a class="headerlink" href="#id12" title="Ссылка на этот заголовок"></a></h2>
<p>Для остановки веб-сервера нажмите <strong>Ctrl + C</strong> в терминале, где запущено приложение. Функция <cite>cleanup()</cite> автоматически выполнится при завершении программы.</p>
</section>
<section id="id13">
<h2>Практические применения<a class="headerlink" href="#id13" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic simple">
<li><p><strong>Система парковки</strong>
Используйте датчик для помощи при парковке автомобиля, показывая расстояние до стены или другого препятствия.</p></li>
<li><p><strong>Измерение уровня жидкости</strong>
Размещение датчика над резервуаром позволяет измерять уровень воды или другой жидкости.</p></li>
<li><p><strong>Система безопасности</strong>
Обнаружение движения или присутствия объектов в определенной зоне.</p></li>
<li><p><strong>Робототехника</strong>
Помощь роботам в определении расстояния до препятствий для навигации.</p></li>
<li><p><strong>Интерактивные инсталляции</strong>
Создание интерактивных арт-проектов, реагирующих на расстояние до посетителей.</p></li>
</ol>
</section>
<section id="id14">
<h2>Возможные улучшения<a class="headerlink" href="#id14" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic simple">
<li><p><strong>Графики изменения расстояния</strong>
Добавьте график, показывающий изменение расстояния с течением времени, используя библиотеки JavaScript, такие как Chart.js.</p></li>
<li><p><strong>Звуковые сигналы</strong>
Реализуйте звуковые оповещения, когда объект приближается ближе определенного порога.</p></li>
<li><p><strong>Запись и анализ данных</strong>
Сохраняйте измерения в базу данных для последующего анализа тенденций или построения более сложных графиков.</p></li>
<li><p><strong>Множественные датчики</strong>
Расширьте приложение для работы с несколькими датчиками HC-SR04, размещенными в разных точках.</p></li>
<li><p><strong>WebSocket вместо обновления страницы</strong>
Замените meta refresh на WebSocket для обновления данных без перезагрузки страницы, что обеспечит более плавный пользовательский опыт.</p></li>
<li><p><strong>Настраиваемые пороги</strong>
Добавьте возможность настраивать пороговые значения расстояния и цветовую индикацию в зависимости от текущего значения.</p></li>
</ol>
</section>
<section id="id15">
<h2>Заключение<a class="headerlink" href="#id15" title="Ссылка на этот заголовок"></a></h2>
<p>В этом уроке мы создали веб-приложение для мониторинга расстояния с использованием ультразвукового датчика HC-SR04, подключенного к Raspberry Pi. Мы использовали CircuitPython для работы с датчиком, Flask для создания веб-интерфейса и многопоточность для обеспечения стабильной работы.</p>
<p>Наш веб-монитор предоставляет наглядный интерфейс для отслеживания расстояния до объектов в реальном времени. Благодаря интуитивно понятной визуализации с помощью прогресс-бара, пользователь может быстро оценить измеренное расстояние.</p>
<p>Этот проект демонстрирует, как можно объединить микроконтроллерное программирование с веб-технологиями для создания полезных и визуально привлекательных IoT-решений.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Нижняя область">
        <a href="../lesson6/webdht.html" class="btn btn-neutral float-left" title="Мини веб метостанция" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="../lesson8/webservo.html" class="btn btn-neutral float-right" title="Веб сайт для управления сервоприводом" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Авторские права 2025, Dias Kabdualiyev. </p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>