============================================================
–£—Ä–æ–∫ 15: –†–∞–±–æ—Ç–∞ —Å MPU6050 (CircuitPython) üß≠
============================================================

–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å
-------------------
MPU6050 ‚Äì —ç—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –¥–∞—Ç—á–∏–∫ –¥–≤–∏–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—á–µ—Ç–∞–µ—Ç –≤ —Å–µ–±–µ 3-–æ—Å–µ–≤–æ–π –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä –∏ 3-–æ—Å–µ–≤–æ–π –≥–∏—Ä–æ—Å–∫–æ–ø –Ω–∞ –æ–¥–Ω–æ–º –∫—Ä–∏—Å—Ç–∞–ª–ª–µ. –≠—Ç–æ—Ç –¥–∞—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Å–∫–æ—Ä–µ–Ω–∏—è, –Ω–∞–∫–ª–æ–Ω–∞ –∏ –≤—Ä–∞—â–µ–Ω–∏—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ. 

–ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä –∏–∑–º–µ—Ä—è–µ—Ç —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ —Ç—Ä–µ–º –æ—Å—è–º (X, Y, Z), –≤–∫–ª—é—á–∞—è –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–∞–∫–ª–æ–Ω —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –ì–∏—Ä–æ—Å–∫–æ–ø –∏–∑–º–µ—Ä—è–µ—Ç —É–≥–ª–æ–≤—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è –ø–æ —Ç—Ä–µ–º –æ—Å—è–º.

MPU6050 –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Raspberry Pi —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å I2C, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –ø—Ä–æ—Å—Ç—ã–º –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å CircuitPython.

–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
----------------------
- Raspberry Pi
- –ú–æ–¥—É–ª—å MPU6050
- –°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–æ–¥–∞

–°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
-----------------
.. figure:: images/mpu6050.png
   :width: 80%
   :align: center

   **–†–∏—Å. 1:** –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è MPU6050

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
-------------------------------
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∫–æ–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MPU6050:

.. code-block:: bash

   pip install adafruit-circuitpython-mpu6050

–ó–∞–ø—É—Å–∫ –∫–æ–¥–∞
------------
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏–ª–∏ IDE (–Ω–∞–ø—Ä–∏–º–µ—Ä, Thonny –∏–ª–∏ VS Code) –Ω–∞ Raspberry Pi.
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª **mpu6050_circuit.py** –≤ –ø–∞–ø–∫–µ `lessons/lesson15/`.
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

–ö–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã
-------------
–§–∞–π–ª: `lessons/lesson15/mpu6050_circuit.py`

.. code-block:: python

    import time
    import board
    import busio
    import adafruit_mpu6050
    import math

    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è I2C –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    i2c = busio.I2C(board.SCL, board.SDA)
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MPU6050
    mpu = adafruit_mpu6050.MPU6050(i2c)
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∏–∑–º–µ—Ä–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    mpu.accelerometer_range = adafruit_mpu6050.Range.RANGE_2_G  # ¬±2g
    mpu.gyro_range = adafruit_mpu6050.GyroRange.RANGE_250_DPS  # ¬±250 ¬∞/s
    
    # –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —É–≥–ª–∞ –Ω–∞–∫–ª–æ–Ω–∞ –∏–∑ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞
    def calculate_tilt_angles(x, y, z):
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ –≤ —É–≥–ª—ã –Ω–∞–∫–ª–æ–Ω–∞ (–≤ –≥—Ä–∞–¥—É—Å–∞—Ö)
        # –∏—Å–ø–æ–ª—å–∑—É—è —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã
        roll = math.atan2(y, z) * 180 / math.pi
        pitch = math.atan2(-x, math.sqrt(y*y + z*z)) * 180 / math.pi
        return roll, pitch
    
    # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
    try:
        print("MPU6050 –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
        print("–ü–µ—Ä–µ–º–µ—â–∞–π—Ç–µ –¥–∞—Ç—á–∏–∫ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π")
        print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞")
        print()
        
        while True:
            # –°—á–∏—Ç—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ (g)
            acceleration = mpu.acceleration
            
            # –°—á–∏—Ç—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å –≥–∏—Ä–æ—Å–∫–æ–ø–∞ (–≥—Ä–∞–¥/—Å)
            gyro = mpu.gyro
            
            # –°—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É (¬∞C)
            temperature = mpu.temperature
            
            # –í—ã—á–∏—Å–ª—è–µ–º —É–≥–ª—ã –Ω–∞–∫–ª–æ–Ω–∞
            roll, pitch = calculate_tilt_angles(acceleration[0], acceleration[1], acceleration[2])
            
            # –í—ã–≤–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª—å
            print("–ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä (–º/—Å¬≤): X={:5.2f}, Y={:5.2f}, Z={:5.2f}".format(
                acceleration[0], acceleration[1], acceleration[2]))
            
            print("–ì–∏—Ä–æ—Å–∫–æ–ø (¬∞/—Å):       X={:5.2f}, Y={:5.2f}, Z={:5.2f}".format(
                gyro[0], gyro[1], gyro[2]))
            
            print("–£–≥–ª—ã –Ω–∞–∫–ª–æ–Ω–∞ (¬∞):     Roll={:5.2f}, Pitch={:5.2f}".format(
                roll, pitch))
            
            print("–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {:.2f} ¬∞C".format(temperature))
            print("-" * 50)
            
            # –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏ –≤—ã–≤–æ–¥–∞
            time.sleep(0.5)
            
    except KeyboardInterrupt:
        print("\n–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.")


–†–∞–∑–±–æ—Ä –∫–æ–¥–∞
------------
- `busio.I2C(board.SCL, board.SDA)` ‚Äì –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è I2C –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Å–≤—è–∑–∏ —Å MPU6050.
- `adafruit_mpu6050.MPU6050(i2c)` ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ MPU6050.
- `mpu.accelerometer_range` ‚Äì —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ (¬±2g).
- `mpu.gyro_range` ‚Äì —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –≥–∏—Ä–æ—Å–∫–æ–ø–∞ (¬±250 –≥—Ä–∞–¥—É—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É).
- `mpu.acceleration` ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ –≤ –º/—Å¬≤ (X, Y, Z).
- `mpu.gyro` ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≥–∏—Ä–æ—Å–∫–æ–ø–∞ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –≤ —Å–µ–∫—É–Ω–¥—É (X, Y, Z).
- `mpu.temperature` ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –¶–µ–ª—å—Å–∏—è.
- `calculate_tilt_angles()` ‚Äì —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —É–≥–ª–æ–≤ –Ω–∞–∫–ª–æ–Ω–∞ (Roll, Pitch) –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞.

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
-------------------
1. –í –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –æ —Ç–µ–∫—É—â–µ–º —É—Å–∫–æ—Ä–µ–Ω–∏–∏ –ø–æ —Ç—Ä–µ–º –æ—Å—è–º.
2. –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —É–≥–ª–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤—Ä–∞—â–µ–Ω–∏—è –ø–æ —Ç—Ä–µ–º –æ—Å—è–º.
3. –í—ã—á–∏—Å–ª—è—é—Ç—Å—è –∏ –≤—ã–≤–æ–¥—è—Ç—Å—è —É–≥–ª—ã –Ω–∞–∫–ª–æ–Ω–∞ (Roll, Pitch).
4. –ò–∑–º–µ—Ä—è–µ—Ç—Å—è –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–∞—Ç—á–∏–∫–∞.
5. –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫—É–Ω–¥—ã.

.. note::
   –£–≥–æ–ª —Ä—ã—Å–∫–∞–Ω–∏—è (Yaw) –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ –¥–∞–Ω–Ω—ã–º –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≤—Ä–∞—â–µ–Ω–∏–µ –≤–æ–∫—Ä—É–≥ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ (–≤—Å–µ —Ç—Ä–∏ —É–≥–ª–∞) —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ñ–∏–ª—å—Ç—Ä –ö–∞–ª–º–∞–Ω–∞ –∏–ª–∏ –∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ –∏ –≥–∏—Ä–æ—Å–∫–æ–ø–∞.

–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
-----------------
–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞–∂–º–∏—Ç–µ **Ctrl + C** –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ –í—ã —É—Å–ø–µ—à–Ω–æ –Ω–∞—É—á–∏–ª–∏—Å—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞—Ç—á–∏–∫–æ–º MPU6050 —Å –ø–æ–º–æ—â—å—é CircuitPython! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –¥–∞—Ç—á–∏–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏, –¥–µ—Ç–µ–∫—Ü–∏–µ–π –¥–≤–∏–∂–µ–Ω–∏—è, —à–∞–≥–æ–º–µ—Ä–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º, —Ç—Ä–µ–±—É—é—â–∏—Ö –∞–Ω–∞–ª–∏–∑–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ.