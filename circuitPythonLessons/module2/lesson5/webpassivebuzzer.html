

<!DOCTYPE html>
<html class="writer-html5" lang="ru" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Пассивный зуммер в веб интерфейсе &mdash; документация Alash Raspberry Pi 5 Kit </title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=d39ee99e" />

  
    <link rel="shortcut icon" href="../../../_static/favicon.png"/>
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=555aecba"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/translations.js?v=5b699b7f"></script>
      <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="../../../genindex.html" />
    <link rel="search" title="Поиск" href="../../../search.html" />
    <link rel="next" title="Мини веб метостанция" href="../lesson6/webdht.html" />
    <link rel="prev" title="Активный зуммер в веб интерфейсе" href="../lesson4/webbuzzer.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Alash Raspberry Pi 5 Kit
              <img src="../../../_static/logo.png" class="logo" alt="Логотип"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Поиск в документации" aria-label="Поиск в документации" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Меню навигации">
              <p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/about.html">Что такое Raspberry Pi?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about/about.html#why-was-raspberry-pi-created">Зачем был создан Raspberry Pi?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../specifications/specifications.html">Технические харектеристика</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#raspberry-pi-5">Краткое введение в Raspberry Pi 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#id2">Характеристики Raspberry Pi 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#id3">Что нового в Raspberry Pi 5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../specifications/specifications.html#id4">Обзор процессора</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../specifications/specifications.html#id5">Сравнительная таблица</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#benchmarks">Производительность в тестах (Benchmarks)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#id6">Идеальные сценарии применения</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../specifications/specifications.html#id7">Заключение</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../parts/index.html">Комплектация набора</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../parts/index.html#id2">Сводный список компонентов</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../parts/photos.html">Фотографий компонентов</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../start/index.html">Первый запуск</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../start/firstactions/firstactions.html">Подготовка Raspberry Pi 5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id1">Вытаскиваем кулер</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id2">Переворачиваем</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id3">Убираем плёнку с термопрокладки</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#raspberry">Ставим на Raspberry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id4">Зажимаем до характерного щелчка в указанных местах</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id5">С обратной стороны убеждаемся, что всё защёлкнуто</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id6">Вставляем штекер кулера</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id7">Штекер должен быть защёлкнут до конца</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id8">Берем основу</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id9">Снимаем скотч и вставляем в пазы</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id10">Вставляем Raspberry на своё место</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#m2-5">Прикручиваем винтами M2.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id11">В итоге должно получиться как на фото</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#hdmi-microhdmi-raspberry">Вставляем HDMI-MicroHDMI кабель в Raspberry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id12">Вставляем кабель питания в разъём</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id13">Подключаем клавиатуру с тачпадом</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#usb">Вставляем USB свисток</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstactions/firstactions.html#id14">Дальнейшая настройка</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../start/firstboot/firstboot.html">Первое включение Raspberry Pi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstboot/firstboot.html#id1">Почему важно подключить монитор</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstboot/firstboot.html#wi-fi">Подключаемся к Wi-Fi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstboot/firstboot.html#id2">Зачем это нужно</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../start/firstcode/index.html">Запуск первого кода на Raspberry Pi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstcode/hdmi.html">Способ работы через монитор HDMI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstcode/vnc.html">VNC-подключение</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../start/firstcode/ssh.html">SSH-подключение VS Code для удаленной разработки на Raspberry Pi</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Уроки на основе CircuitPython</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../module1/index.html">Модуль первый</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson1/blink.html">Урок 1: Моргание светодиодом ✨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson2/button.html">Урок 2: Подключение кнопки ✨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson3/rgb.html">Урок 3: RGB светодиод 🌈</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson4/active_buzzer.html">Урок 4: Работа с активным зуммером 🔊</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson5/passive_buzzer.html">Урок 5: Работа с пассивным зуммером 🎵</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson6/dht.html">Урок 6: Работа с датчиком температуры и влажности DHT11</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson7/hsr04.html">Урок 7: Ультразвуковой датчик HC-SR04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson8/servo.html">Урок 8: Управление сервоприводом SG90 🔄</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson9/relay.html">Урок 9: Управление реле 🔌</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson10/klav.html">Урок 10: Матричная клавиатура ⌨️</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson11/encoder.html">Урок 11: Работа с энкодером 🔄</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson12/max.html">Урок 12: LED-матрица MAX7219 🔲</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson13/pot.html">Урок 13: Модуль потенциометра ADS1115 🎚️</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson14/joystick.html">Урок 14: Работа с джойстиком 🕹️</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson15/mpu6050.html">Урок 15: Работа с MPU6050 🧭</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson16/pca9685.html">Урок 16: Модуль PCA9685 для сервоприводов  🤖</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson17/lcd1602.html">Урок 17: LCD1602 дисплей</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson18/mfrc522.html">Урок: Работа с RFID/NFC считывателем PN532 на Raspberry Pi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module1/lesson19/camera.html">Урок 19: Работа с камерой Raspberry Pi 📷</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Модуль второй</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../lesson1/flask.html">Основы Flask</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson2/weblink.html">Веб светодиод</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson3/webrgb.html">RGB веб светодиод</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson4/webbuzzer.html">Активный зуммер в веб интерфейсе</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Пассивный зуммер в веб интерфейсе</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson6/webdht.html">Мини веб метостанция</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson7/hcsr04web.html">Веб ультразвуковая страница</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson8/webservo.html">Веб сайт для управления сервоприводом</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson9/webrelay.html">Веб реле</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson10/webkeypad.html">Веб клавиатура</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson11/webencoder.html">Энкодер с веб-интерфейсом</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson12/webmax.html">MAX7219 и веб-интерфейс</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson13/webpot.html">Потенциометр и веб-интерфейс</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson14/webjoystick.html">Веб-интерфейс и джойстик</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson15/webmpu.html">3D веб визуализация MPU6050</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson16/webpca.html">Веб управлениt сервоприводами через PCA9685</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson17/weblcd.html">Урок: Веб-интерфейс для управления LCD дисплеем</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lesson18/nfrc522.html">Урок: Веб-интерфейс для RFID считывателя на Raspberry Pi</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../lessons/index.html">Уроки</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../lessons/module1/index.html">Модуль 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson1/led.html">Урок 1: Моргание светодиодом ✨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson2/ledbutton.html">Урок 2: Подключение кнопки ✨</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson3/rgb.html">Урок 3: RGB светодиод</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson4/activebuzzer.html">Урок 4: Работа с активным зуммером 🔊</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson5/passivebuzzer.html">Урок 5: Пассивный зуммер и потенциометр</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson6/relay.html">Урок 6: Управление реле</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson7/dht11.html">Урок 7: Датчик DHT11 (Кастомная реализация)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson8/sg90.html">Урок 8: Управление сервоприводом SG90</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson10/lcd1602.html">Урок 10: Работа с LCD1602</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson11/mfrc522.html">Урок 11: СКУД на базе RFID и сервопривода</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson12/8dotdisplay.html">Урок 12: LED-матрица MAX7219</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson13/joystick.html">Урок 13: Джойстик</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson14/encoder.html">Урок 14: Работа с энкодером и кнопкой</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson15/klav.html">Урок 15 Клавиатура</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson16/pot.html">Урок 16: Работа с потенциометром ⚙️</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson17/camera.html">Урок 17: Камера</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module1/lesson18/hsr04.html">Урок 7: Ультразвуковой радар 📡</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../lessons/module2/index.html">Модуль 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson1/flask.html">Урок 1: Первый веб-сайт на Flask</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson2/webserver.html">Урок: Управление светодиодом через веб-интерфейс</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson3/ledbutton.html">Урок 3: Управление светодиодом через Flask</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson4/flaskdht.html">Урок 4: Мониторинг DHT11 через Flask</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../lessons/module2/lesson5/webcamera.html">Урок 18: Онлайн-видеопоток с PiCamera2 через Flask</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../lessons/module3/index.html">Модуль 3</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../components/index.html">Узнайте больше о компонентах, входящих в Ваш комплект</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../components/basic/breadboard.html">Breadboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../components/basic/jumper.html">Светодиоды</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../components/basic/resistor.html">Резистор</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../appendix/index.html">Дополнения</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/i2c/i2c.html">Настройка I2C</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/i2c/i2c.html#id1">Подготовка системы</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/i2c/i2c.html#i2c-raspi-config">Включение I2C через raspi-config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/i2c/i2c.html#id2">Проверка работы I2C</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/i2c/i2c.html#id3">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/spi/spi.html">Настройка SPI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/spi/spi.html#id1">Подготовка системы</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/spi/spi.html#spi-raspi-config">Включение SPI через raspi-config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/spi/spi.html#id2">Проверка работы SPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/spi/spi.html#id3">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/ping/ping.html">Проверка подключения к локальной сети</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/vnc/vnc.html">Настройка VNC (Удаленный рабочий стол)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vnc/vnc.html#id1">Шаг 1: Установка VNC-сервера</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vnc/vnc.html#id2">Шаг 2: Подключение к VNC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/ssh/ssh.html">Настройка SSH (PuTTY)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/ssh.html#ssh">Шаг 1: Включение SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/ssh.html#raspberry-pi-ssh">Шаг 2: Подключение к Raspberry Pi через SSH</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/ssh/cmd.html">Установка встроенного SSH-клиента в Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#ssh">Что такое SSH и почему важен встроенный клиент</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id1">Проверка наличия SSH-клиента</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id2">Включение SSH-клиента в Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id3">Проверка работоспособности</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#raspberry-pi">Подключение к Raspberry Pi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#ssh-raspberry-pi">Основные команды SSH для работы с Raspberry Pi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id4">Возможные проблемы и их решения</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/ssh/cmd.html#id5">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/vscode/vscode.html">Установка Visual Studio Code на Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#visual-studio-code">Что такое Visual Studio Code?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#vs-code-windows">Установка VS Code на Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#vs-code">Первый запуск VS Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#id1">Установка необходимых расширений</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/vscode/vscode.html#id2">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/getip/getip.html">Как узнать IP адрес Raspberry Pi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/getip/getip.html#ip">Способ 1. Определение IP адреса через командную строку</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/getip/getip.html#id1">Способ 2. Определение IP адреса через графический интерфейс</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../appendix/getip/getip.html#id2">Заключение</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../appendix/gpiozero/gpiozero.html"><strong>Если</strong> <code class="docutils literal notranslate"><span class="pre">gpiozero</span></code> <strong>не работает.</strong></a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../thankyou/thankyou.html">Обратная связь</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Меню навигации для мобильных устройств" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Alash Raspberry Pi 5 Kit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Навигация по страницам">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Уроки на основе CircuitPython</a></li>
          <li class="breadcrumb-item"><a href="../index.html">Модуль второй</a></li>
      <li class="breadcrumb-item active">Пассивный зуммер в веб интерфейсе</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Навигация по соседним страницам">
        <a href="../lesson4/webbuzzer.html" class="btn btn-neutral float-left" title="Активный зуммер в веб интерфейсе" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="../lesson6/webdht.html" class="btn btn-neutral float-right" title="Мини веб метостанция" accesskey="n">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>Пассивный зуммер в веб интерфейсе<a class="headerlink" href="#id1" title="Ссылка на этот заголовок"></a></h1>
<section id="id2">
<h2>Теоретическая часть<a class="headerlink" href="#id2" title="Ссылка на этот заголовок"></a></h2>
<p><strong>Пассивный зуммер</strong> отличается от активного тем, что не имеет встроенного генератора звука. Для извлечения звука через пассивный зуммер необходимо подавать сигнал определенной частоты. Изменяя эту частоту, можно получать различные ноты музыкальной гаммы, что позволяет воспроизводить мелодии.</p>
<p>Для генерации сигналов различной частоты будем использовать технологию <strong>PWM</strong> (широтно-импульсная модуляция). PWM позволяет контролировать как частоту сигнала (определяет высоту ноты), так и рабочий цикл (влияет на громкость).</p>
<p>В этом уроке мы создадим веб-приложение, которое позволит:
- Воспроизводить предустановленные мелодии
- Играть отдельные ноты как на пианино
- Останавливать воспроизведение
- Отслеживать текущую ноту или статус воспроизведения</p>
<p>Для реализации этого проекта будем использовать:
1. <strong>CircuitPython</strong> для управления GPIO пинами и PWM на Raspberry Pi
2. <strong>Flask</strong> для создания веб-сервера и интерфейса
3. <strong>Многопоточность (Threading)</strong> для воспроизведения звуков без блокировки веб-интерфейса</p>
</section>
<section id="id3">
<h2>Необходимые компоненты<a class="headerlink" href="#id3" title="Ссылка на этот заголовок"></a></h2>
<ul class="simple">
<li><p>Raspberry Pi</p></li>
<li><p>Пассивный зуммер</p></li>
<li><p>Резистор 220 Ом (опционально, для ограничения тока)</p></li>
<li><p>Макетная плата (breadboard)</p></li>
<li><p>Соединительные провода</p></li>
</ul>
</section>
<section id="id4">
<h2>Схема подключения<a class="headerlink" href="#id4" title="Ссылка на этот заголовок"></a></h2>
<figure class="align-center" id="id15">
<a class="reference internal image-reference" href="../../../_images/passive_buzzer_circuit.png"><img alt="../../../_images/passive_buzzer_circuit.png" src="../../../_images/passive_buzzer_circuit.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-text"><strong>Рис. 1:</strong> Схема подключения пассивного зуммера</span><a class="headerlink" href="#id15" title="Ссылка на это изображение"></a></p>
</figcaption>
</figure>
<p>Подключите пассивный зуммер к Raspberry Pi следующим образом:
- Положительный вывод (+) к GPIO18
- Отрицательный вывод (-) к GND (земля)</p>
</section>
<section id="id5">
<h2>Установка необходимых библиотек<a class="headerlink" href="#id5" title="Ссылка на этот заголовок"></a></h2>
<p>Перед запуском кода установите Flask и CircuitPython:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>flask<span class="w"> </span>adafruit-blinka
</pre></div>
</div>
</section>
<section id="id6">
<h2>Структура проекта<a class="headerlink" href="#id6" title="Ссылка на этот заголовок"></a></h2>
<p>Создайте следующую структуру папок и файлов:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>music_buzzer/
├──<span class="w"> </span>app.py<span class="w">           </span><span class="c1"># Основной файл Flask-приложения</span>
└──<span class="w"> </span>templates/
<span class="w">    </span>└──<span class="w"> </span>index.html<span class="w">   </span><span class="c1"># HTML-шаблон для веб-интерфейса</span>
</pre></div>
</div>
</section>
<section id="id7">
<h2>Код приложения<a class="headerlink" href="#id7" title="Ссылка на этот заголовок"></a></h2>
<p>Файл: <cite>music_buzzer/app.py</cite></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">board</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pwmio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>

<span class="c1"># Настройка пина для пассивного зуммера с использованием PWM</span>
<span class="n">buzzer</span> <span class="o">=</span> <span class="n">pwmio</span><span class="o">.</span><span class="n">PWMOut</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">D18</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="mi">440</span><span class="p">,</span> <span class="n">duty_cycle</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Инициализация Flask приложения</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Глобальные переменные для управления состоянием</span>
<span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Готов к воспроизведению&quot;</span>
<span class="n">playing</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">stop_playing</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># Словарь нот и их частот в Гц</span>
<span class="n">NOTES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;C4&#39;</span><span class="p">:</span> <span class="mi">262</span><span class="p">,</span>  <span class="c1"># До четвертой октавы</span>
    <span class="s1">&#39;D4&#39;</span><span class="p">:</span> <span class="mi">294</span><span class="p">,</span>  <span class="c1"># Ре</span>
    <span class="s1">&#39;E4&#39;</span><span class="p">:</span> <span class="mi">330</span><span class="p">,</span>  <span class="c1"># Ми</span>
    <span class="s1">&#39;F4&#39;</span><span class="p">:</span> <span class="mi">349</span><span class="p">,</span>  <span class="c1"># Фа</span>
    <span class="s1">&#39;G4&#39;</span><span class="p">:</span> <span class="mi">392</span><span class="p">,</span>  <span class="c1"># Соль</span>
    <span class="s1">&#39;A4&#39;</span><span class="p">:</span> <span class="mi">440</span><span class="p">,</span>  <span class="c1"># Ля</span>
    <span class="s1">&#39;B4&#39;</span><span class="p">:</span> <span class="mi">494</span><span class="p">,</span>  <span class="c1"># Си</span>
    <span class="s1">&#39;C5&#39;</span><span class="p">:</span> <span class="mi">523</span><span class="p">,</span>  <span class="c1"># До пятой октавы</span>
    <span class="s1">&#39;REST&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># Пауза</span>
<span class="p">}</span>

<span class="c1"># Мелодия &quot;Маленькая звездочка&quot; (Twinkle Twinkle Little Star)</span>
<span class="n">TWINKLE</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;G4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;G4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;A4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;G4&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;F4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;F4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;D4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;D4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">),</span>
<span class="p">]</span>

<span class="c1"># Гамма</span>
<span class="n">SCALE</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;D4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;F4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;G4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C5&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;C5&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;A4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;G4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;F4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;D4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
<span class="p">]</span>

<span class="c1"># Функция для проигрывания ноты заданной длительности</span>
<span class="k">def</span><span class="w"> </span><span class="nf">play_note</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">status</span>

    <span class="k">if</span> <span class="n">note</span> <span class="o">==</span> <span class="s1">&#39;REST&#39;</span><span class="p">:</span>
        <span class="c1"># Пауза - просто ждем</span>
        <span class="n">buzzer</span><span class="o">.</span><span class="n">duty_cycle</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Пауза: </span><span class="si">{</span><span class="n">duration</span><span class="si">}</span><span class="s2"> сек&quot;</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Устанавливаем частоту ноты</span>
        <span class="n">buzzer</span><span class="o">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="n">NOTES</span><span class="p">[</span><span class="n">note</span><span class="p">]</span>
        <span class="c1"># Устанавливаем громкость (50% от максимальной)</span>
        <span class="n">buzzer</span><span class="o">.</span><span class="n">duty_cycle</span> <span class="o">=</span> <span class="mi">32768</span>  <span class="c1"># 50% от 65535</span>

        <span class="n">note_names</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;C4&#39;</span><span class="p">:</span> <span class="s1">&#39;До&#39;</span><span class="p">,</span> <span class="s1">&#39;D4&#39;</span><span class="p">:</span> <span class="s1">&#39;Ре&#39;</span><span class="p">,</span> <span class="s1">&#39;E4&#39;</span><span class="p">:</span> <span class="s1">&#39;Ми&#39;</span><span class="p">,</span> <span class="s1">&#39;F4&#39;</span><span class="p">:</span> <span class="s1">&#39;Фа&#39;</span><span class="p">,</span>
            <span class="s1">&#39;G4&#39;</span><span class="p">:</span> <span class="s1">&#39;Соль&#39;</span><span class="p">,</span> <span class="s1">&#39;A4&#39;</span><span class="p">:</span> <span class="s1">&#39;Ля&#39;</span><span class="p">,</span> <span class="s1">&#39;B4&#39;</span><span class="p">:</span> <span class="s1">&#39;Си&#39;</span><span class="p">,</span> <span class="s1">&#39;C5&#39;</span><span class="p">:</span> <span class="s1">&#39;До⁵&#39;</span>
        <span class="p">}</span>
        <span class="n">status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Играет нота: </span><span class="si">{</span><span class="n">note_names</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">note</span><span class="p">,</span><span class="w"> </span><span class="n">note</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1"># Ждем заданную длительность</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="c1"># Выключаем звук</span>
        <span class="n">buzzer</span><span class="o">.</span><span class="n">duty_cycle</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Небольшая пауза между нотами</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>

<span class="c1"># Функция для проигрывания мелодии</span>
<span class="k">def</span><span class="w"> </span><span class="nf">play_melody</span><span class="p">(</span><span class="n">melody_name</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">playing</span><span class="p">,</span> <span class="n">stop_playing</span><span class="p">,</span> <span class="n">status</span>

    <span class="k">if</span> <span class="n">playing</span><span class="p">:</span>
        <span class="k">return</span>  <span class="c1"># Если уже играет мелодия, не запускаем новую</span>

    <span class="n">playing</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">stop_playing</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">melody</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">melody_name</span> <span class="o">==</span> <span class="s2">&quot;twinkle&quot;</span><span class="p">:</span>
        <span class="n">melody</span> <span class="o">=</span> <span class="n">TWINKLE</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Играет: Маленькая звездочка&quot;</span>
    <span class="k">elif</span> <span class="n">melody_name</span> <span class="o">==</span> <span class="s2">&quot;scale&quot;</span><span class="p">:</span>
        <span class="n">melody</span> <span class="o">=</span> <span class="n">SCALE</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Играет: Гамма&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">play_thread</span><span class="p">():</span>
        <span class="k">global</span> <span class="n">playing</span><span class="p">,</span> <span class="n">stop_playing</span><span class="p">,</span> <span class="n">status</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="n">stop_playing</span><span class="p">:</span>
                <span class="c1"># Проигрываем мелодию один раз</span>
                <span class="k">for</span> <span class="n">note</span><span class="p">,</span> <span class="n">duration</span> <span class="ow">in</span> <span class="n">melody</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">stop_playing</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="n">play_note</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="n">duration</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">stop_playing</span><span class="p">:</span>
                    <span class="k">break</span>

                <span class="c1"># Пауза перед повторением</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

            <span class="n">buzzer</span><span class="o">.</span><span class="n">duty_cycle</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Воспроизведение остановлено&quot;</span>
            <span class="n">playing</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">buzzer</span><span class="o">.</span><span class="n">duty_cycle</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">status</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Ошибка: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">playing</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># Запускаем воспроизведение в отдельном потоке</span>
    <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">play_thread</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># Маршруты Flask</span>
<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/play/&lt;melody&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">play</span><span class="p">(</span><span class="n">melody</span><span class="p">):</span>
    <span class="n">play_melody</span><span class="p">(</span><span class="n">melody</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/note/&lt;note&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">play_single_note</span><span class="p">(</span><span class="n">note</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">status</span>

    <span class="k">if</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">NOTES</span><span class="p">:</span>
        <span class="c1"># Остановим любое текущее воспроизведение</span>
        <span class="n">stop</span><span class="p">()</span>

        <span class="c1"># Проигрываем отдельную ноту в отдельном потоке</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">note_thread</span><span class="p">():</span>
            <span class="n">play_note</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Играем ноту 0.5 секунды</span>
            <span class="k">global</span> <span class="n">status</span>
            <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Готов к воспроизведению&quot;</span>

        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">note_thread</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/stop&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">stop_playing</span><span class="p">,</span> <span class="n">status</span>

    <span class="n">stop_playing</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">buzzer</span><span class="o">.</span><span class="n">duty_cycle</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Готов к воспроизведению&quot;</span>

    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

<span class="c1"># Функция очистки при завершении</span>
<span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">():</span>
    <span class="n">buzzer</span><span class="o">.</span><span class="n">duty_cycle</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Программа завершена&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># Регистрируем функцию очистки</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">atexit</span>
    <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">cleanup</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Запускаем веб-сервер</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Веб-сервер запущен на порту 8080. Нажмите Ctrl+C для завершения.&quot;</span><span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="html">
<h2>HTML-шаблон<a class="headerlink" href="#html" title="Ссылка на этот заголовок"></a></h2>
<p>Файл: <cite>music_buzzer/templates/index.html</cite></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Управление зуммером - Мелодии<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">        </span><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="n">Arial</span><span class="p">,</span><span class="w"> </span><span class="kc">sans-serif</span><span class="p">;</span>
<span class="w">            </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f5f5f5</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nt">h1</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#333</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">container</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">            </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">button-container</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="w">            </span><span class="k">flex-wrap</span><span class="p">:</span><span class="w"> </span><span class="kc">wrap</span><span class="p">;</span>
<span class="w">            </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="w">            </span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nt">button</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="w"> </span><span class="mi">25</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">            </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#2196F3</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">min-width</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">transition</span><span class="p">:</span><span class="w"> </span><span class="k">background-color</span><span class="w"> </span><span class="mf">0.3</span><span class="kt">s</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nt">button</span><span class="p">:</span><span class="nd">hover</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#0b7dda</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">twinkle</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#4CAF50</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">scale</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#FF9800</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">custom</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#9C27B0</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">stop</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#F44336</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">note-buttons</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="w">            </span><span class="k">flex-wrap</span><span class="p">:</span><span class="w"> </span><span class="kc">wrap</span><span class="p">;</span>
<span class="w">            </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="w">            </span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">note-button</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">min-width</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#673AB7</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">note-button</span><span class="p">:</span><span class="nd">hover</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#5e35b1</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">status</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f0f0f0</span><span class="p">;</span>
<span class="w">            </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">notes-title</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="kt">px</span><span class="p">;</span>
<span class="w">            </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#555</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Управление мелодиями<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;button-container&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/play/twinkle&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;twinkle&quot;</span><span class="p">&gt;</span>Маленькая звездочка<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/play/scale&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;scale&quot;</span><span class="p">&gt;</span>Гамма<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/stop&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;stop&quot;</span><span class="p">&gt;</span>Стоп<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;status&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Статус: {{ status }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;notes-title&quot;</span><span class="p">&gt;</span>Отдельные ноты:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;note-buttons&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/note/C4&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;note-button&quot;</span><span class="p">&gt;</span>До<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/note/D4&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;note-button&quot;</span><span class="p">&gt;</span>Ре<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/note/E4&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;note-button&quot;</span><span class="p">&gt;</span>Ми<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/note/F4&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;note-button&quot;</span><span class="p">&gt;</span>Фа<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/note/G4&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;note-button&quot;</span><span class="p">&gt;</span>Соль<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/note/A4&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;note-button&quot;</span><span class="p">&gt;</span>Ля<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/note/B4&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;note-button&quot;</span><span class="p">&gt;</span>Си<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/note/C5&quot;</span><span class="p">&gt;&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;note-button&quot;</span><span class="p">&gt;</span>До⁵<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
<section id="id8">
<h2>Разбор кода<a class="headerlink" href="#id8" title="Ссылка на этот заголовок"></a></h2>
<p><strong>Python-код (app.py):</strong></p>
<ol class="arabic">
<li><p><strong>Настройка зуммера с использованием PWM</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">buzzer</span> <span class="o">=</span> <span class="n">pwmio</span><span class="o">.</span><span class="n">PWMOut</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">D18</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="mi">440</span><span class="p">,</span> <span class="n">duty_cycle</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Инициализируем PWM на GPIO18 с начальной частотой 440 Гц (нота Ля)</p></li>
<li><p>Устанавливаем <cite>duty_cycle=0</cite>, что означает отсутствие звука при запуске</p></li>
</ul>
</li>
<li><p><strong>Определение музыкальных нот и их частот</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">NOTES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;C4&#39;</span><span class="p">:</span> <span class="mi">262</span><span class="p">,</span>  <span class="c1"># До четвертой октавы</span>
    <span class="c1"># ...</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Создаем словарь, где ключи — названия нот, а значения — их частоты в Герцах</p></li>
<li><p>Это позволяет задавать мелодии символьными обозначениями нот</p></li>
</ul>
</li>
<li><p><strong>Определение мелодий</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">TWINKLE</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="c1"># ...</span>
<span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Мелодии представлены в виде списков кортежей (нота, длительность)</p></li>
<li><p>Для каждой ноты указывается ее длительность в секундах</p></li>
</ul>
</li>
<li><p><strong>Функция воспроизведения отдельной ноты</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">play_note</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
    <span class="c1"># ...</span>
    <span class="k">if</span> <span class="n">note</span> <span class="o">==</span> <span class="s1">&#39;REST&#39;</span><span class="p">:</span>
        <span class="c1"># Обработка паузы</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Установка частоты и рабочего цикла</span>
        <span class="n">buzzer</span><span class="o">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="n">NOTES</span><span class="p">[</span><span class="n">note</span><span class="p">]</span>
        <span class="n">buzzer</span><span class="o">.</span><span class="n">duty_cycle</span> <span class="o">=</span> <span class="mi">32768</span>  <span class="c1"># 50% от 65535</span>
        <span class="c1"># ...</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Если нота — пауза (<cite>REST</cite>), просто ждем указанное время</p></li>
<li><p>Для обычных нот устанавливаем соответствующую частоту и рабочий цикл 50%</p></li>
<li><p>Обновляем статус и добавляем перевод нот с английской нотации на русскую</p></li>
</ul>
</li>
<li><p><strong>Функция воспроизведения мелодии</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">play_melody</span><span class="p">(</span><span class="n">melody_name</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">playing</span><span class="p">,</span> <span class="n">stop_playing</span><span class="p">,</span> <span class="n">status</span>

    <span class="k">if</span> <span class="n">playing</span><span class="p">:</span>
        <span class="k">return</span>  <span class="c1"># Предотвращаем наложение мелодий</span>

    <span class="c1"># Выбор мелодии и установка статуса</span>
    <span class="c1"># ...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">play_thread</span><span class="p">():</span>
        <span class="c1"># Код для воспроизведения мелодии в цикле</span>
        <span class="c1"># ...</span>

    <span class="c1"># Запуск в отдельном потоке</span>
    <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">play_thread</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Используется флаг <cite>playing</cite> для предотвращения одновременного проигрывания нескольких мелодий</p></li>
<li><p>Создается вложенная функция <cite>play_thread()</cite>, которая воспроизводит мелодию в цикле</p></li>
<li><p>Используется многопоточность (<cite>threading</cite>) для запуска воспроизведения без блокировки веб-интерфейса</p></li>
<li><p>Поток помечается как <cite>daemon=True</cite>, чтобы он завершался вместе с основным потоком</p></li>
</ul>
</li>
<li><p><strong>Маршруты Flask</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/play/&lt;melody&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">play</span><span class="p">(</span><span class="n">melody</span><span class="p">):</span>
    <span class="n">play_melody</span><span class="p">(</span><span class="n">melody</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/note/&lt;note&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">play_single_note</span><span class="p">(</span><span class="n">note</span><span class="p">):</span>
    <span class="c1"># ...</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/stop&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">():</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Маршрут <cite>/</cite> — главная страница с текущим статусом</p></li>
<li><p>Маршрут <cite>/play/&lt;melody&gt;</cite> — запуск воспроизведения выбранной мелодии</p></li>
<li><p>Маршрут <cite>/note/&lt;note&gt;</cite> — воспроизведение отдельной ноты</p></li>
<li><p>Маршрут <cite>/stop</cite> — остановка текущего воспроизведения</p></li>
</ul>
</li>
<li><p><strong>Функция очистки и запуск приложения</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">cleanup</span><span class="p">():</span>
    <span class="n">buzzer</span><span class="o">.</span><span class="n">duty_cycle</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Программа завершена&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">atexit</span>
    <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">cleanup</span><span class="p">)</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Функция <cite>cleanup()</cite> выключает зуммер при завершении программы</p></li>
<li><p>Используется <cite>atexit.register()</cite> для регистрации функции очистки, которая выполнится при завершении программы</p></li>
<li><p>Запуск Flask-сервера с отключенным режимом отладки для повышения производительности</p></li>
</ul>
</li>
</ol>
<p><strong>HTML-шаблон (index.html):</strong></p>
<ol class="arabic simple">
<li><p><strong>Структура страницы</strong>
- Адаптивный дизайн с использованием контейнера с максимальной шириной
- Заголовок страницы
- Раздел с кнопками для воспроизведения мелодий
- Блок статуса
- Раздел с кнопками для отдельных нот (мини-пианино)</p></li>
<li><p><strong>CSS-стили</strong>
- Стили для улучшения внешнего вида страницы
- Цветовая кодировка для разных типов кнопок
- Адаптивная вёрстка с использованием flexbox
- Эффекты при наведении для кнопок</p></li>
<li><p><strong>Особенности интерфейса</strong>
- Карточный дизайн с тенями и закругленными углами
- Цветовое разделение кнопок по функциям
- Компактное расположение кнопок для нот
- Отображение текущего статуса в отдельном блоке</p></li>
</ol>
</section>
<section id="id9">
<h2>Запуск приложения<a class="headerlink" href="#id9" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic">
<li><p>Сохраните файлы с указанной структурой.</p></li>
<li><p>Запустите приложение:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>app.py
</pre></div>
</div>
</li>
<li><p>Откройте веб-браузер и перейдите по адресу <cite>http://&lt;IP-адрес-Raspberry-Pi&gt;:8080</cite></p>
<p>Например: <cite>http://192.168.1.100:8080</cite></p>
</li>
</ol>
</section>
<section id="id10">
<h2>Ожидаемый результат<a class="headerlink" href="#id10" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic simple">
<li><p>В браузере загрузится страница с тремя основными кнопками:
- «Маленькая звездочка» — для воспроизведения первой мелодии
- «Гамма» — для воспроизведения музыкальной гаммы
- «Стоп» — для остановки текущего воспроизведения</p></li>
<li><p>Ниже будет отображаться текущий статус воспроизведения.</p></li>
<li><p>В нижней части страницы будут расположены кнопки для воспроизведения отдельных нот: «До», «Ре», «Ми», «Фа», «Соль», «Ля», «Си», «До⁵».</p></li>
<li><p>При нажатии на кнопку мелодии:
- Пассивный зуммер начнет воспроизводить выбранную мелодию
- Статус на странице будет обновляться, показывая текущую ноту
- Мелодия будет циклически повторяться до нажатия кнопки «Стоп»</p></li>
<li><p>При нажатии на кнопку ноты:
- Зуммер воспроизведет выбранную ноту в течение 0.5 секунды
- Если в этот момент играла мелодия, она будет остановлена</p></li>
</ol>
<figure class="align-center" id="id16">
<a class="reference internal image-reference" href="../../../_images/buzzer_music_interface.png"><img alt="../../../_images/buzzer_music_interface.png" src="../../../_images/buzzer_music_interface.png" style="width: 80%;" />
</a>
<figcaption>
<p><span class="caption-text"><strong>Рис. 2:</strong> Пример веб-интерфейса управления музыкальным зуммером</span><a class="headerlink" href="#id16" title="Ссылка на это изображение"></a></p>
</figcaption>
</figure>
</section>
<section id="id11">
<h2>Завершение работы<a class="headerlink" href="#id11" title="Ссылка на этот заголовок"></a></h2>
<p>Для остановки веб-сервера нажмите <strong>Ctrl + C</strong> в терминале, где запущено приложение. Функция <cite>cleanup()</cite> автоматически выключит зуммер.</p>
</section>
<section id="id12">
<h2>Технические детали и особенности реализации<a class="headerlink" href="#id12" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic">
<li><p><strong>Использование PWM для генерации звука</strong></p>
<p>PWM (Pulse Width Modulation, Широтно-импульсная модуляция) позволяет генерировать периодические сигналы с заданной частотой. В нашем случае это используется для создания звуковых волн определенной частоты, соответствующей музыкальным нотам.</p>
</li>
<li><p><strong>Многопоточность</strong></p>
<p>Многопоточность позволяет выполнять длительные операции (воспроизведение мелодии) без блокировки основного потока, в котором работает веб-сервер. Это делает интерфейс более отзывчивым — пользователь может взаимодействовать с веб-страницей во время воспроизведения звука.</p>
</li>
<li><p><strong>Механизм защиты от наложения</strong></p>
<p>В коде реализован механизм, предотвращающий одновременное воспроизведение нескольких мелодий. Если пользователь нажмет на кнопку новой мелодии, пока текущая еще не закончилась, новая мелодия не запустится.</p>
</li>
<li><p><strong>Мелодии как структуры данных</strong></p>
<p>Мелодии представлены в виде списков кортежей, где каждый кортеж содержит название ноты и ее длительность. Это делает код более читаемым и упрощает добавление новых мелодий.</p>
</li>
<li><p><strong>Перевод нот</strong></p>
<p>В функции <cite>play_note()</cite> реализован перевод нот из стандартной музыкальной нотации (C4, D4, и т.д.) в русскоязычную нотацию (До, Ре, и т.д.), что делает интерфейс более дружелюбным для русскоязычных пользователей.</p>
</li>
</ol>
</section>
<section id="id13">
<h2>Возможные улучшения и расширения<a class="headerlink" href="#id13" title="Ссылка на этот заголовок"></a></h2>
<ol class="arabic">
<li><p><strong>Добавление новых мелодий</strong>:
Вы можете расширить набор предустановленных мелодий, добавив их в код, например:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Мелодия &quot;В лесу родилась елочка&quot; (первые такты)</span>
<span class="n">FOREST_TREE</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;G4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;D4&#39;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;E4&#39;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span>
    <span class="c1"># ...</span>
<span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><strong>Регулировка громкости</strong>:
Добавьте слайдер для управления громкостью звука, изменяя значение <cite>duty_cycle</cite>.</p></li>
<li><p><strong>Сохранение пользовательских мелодий</strong>:
Создайте интерфейс для создания и сохранения пользовательских мелодий.</p></li>
<li><p><strong>Визуализация воспроизведения</strong>:
Добавьте визуальные эффекты, такие как подсветка кнопок нот при их воспроизведении в мелодии.</p></li>
<li><p><strong>Использование WebSocket</strong>:
Замените обновление страницы на WebSocket для получения обновлений статуса в реальном времени без перезагрузки страницы.</p></li>
<li><p><strong>Регулировка темпа</strong>:
Добавьте возможность ускорять или замедлять воспроизведение мелодии.</p></li>
</ol>
</section>
<section id="id14">
<h2>Заключение<a class="headerlink" href="#id14" title="Ссылка на этот заголовок"></a></h2>
<p>В этом уроке мы создали веб-приложение для управления пассивным зуммером, которое позволяет воспроизводить мелодии и отдельные ноты через веб-интерфейс. Мы использовали технологию PWM для генерации звуковых сигналов различной частоты, а также многопоточность для обеспечения отзывчивости интерфейса.</p>
<p>Проект демонстрирует интеграцию технологий управления аппаратными средствами (CircuitPython и PWM) с веб-технологиями (Flask, HTML, CSS), что является хорошим примером IoT-приложения.</p>
<p>Этот проект может служить основой для создания более сложных музыкальных приложений и быть использован в образовательных целях для изучения основ музыки, программирования и электроники.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Нижняя область">
        <a href="../lesson4/webbuzzer.html" class="btn btn-neutral float-left" title="Активный зуммер в веб интерфейсе" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Предыдущая</a>
        <a href="../lesson6/webdht.html" class="btn btn-neutral float-right" title="Мини веб метостанция" accesskey="n" rel="next">Следующая <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Авторские права 2025, Dias Kabdualiyev. </p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>